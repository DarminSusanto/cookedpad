â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  âœ… KUBERNETES DEPLOYMENT - COMPLETE                          â•‘
â•‘                                                                               â•‘
â•‘         Semua komponen sudah siap sesuai Step 8 deployment guide!             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ KUBERNETES FILE STRUCTURE - ORGANIZED & PRODUCTION-READY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

k8s/
â”œâ”€â”€ 01-namespace.yaml          âœ… Namespace: cookedpad
â”œâ”€â”€ 02-configmap.yaml          âœ… Configuration (ports, URLs, env vars)
â”œâ”€â”€ 03-secrets.yaml            âœ… Secrets + RBAC (auto-allow)
â”‚
â”œâ”€â”€ deployments/               âœ… Deployment specifications
â”‚   â”œâ”€â”€ frontend.yaml          - 2 replicas, LoadBalancer ready
â”‚   â”œâ”€â”€ auth.yaml              - 2 replicas, ClusterIP
â”‚   â”œâ”€â”€ users.yaml             - 2 replicas, ClusterIP
â”‚   â”œâ”€â”€ recipes.yaml           - 2 replicas, ClusterIP
â”‚   â””â”€â”€ comments.yaml          - 2 replicas, ClusterIP
â”‚
â”œâ”€â”€ services/                  âœ… Service definitions
â”‚   â”œâ”€â”€ frontend.yaml          - LoadBalancer (80)
â”‚   â”œâ”€â”€ auth.yaml              - ClusterIP (3001)
â”‚   â”œâ”€â”€ users.yaml             - ClusterIP (3002)
â”‚   â”œâ”€â”€ recipes.yaml           - ClusterIP (3003)
â”‚   â””â”€â”€ comments.yaml          - ClusterIP (3004)
â”‚
â”œâ”€â”€ 04-hpa.yaml                âœ… Horizontal Pod Autoscaler
â”‚   - Frontend: 2-10 replicas
â”‚   - Services: 2-8 replicas each
â”‚   - Triggers: CPU 70-75%, Memory 80-85%
â”‚
â”œâ”€â”€ 05-ingress.yaml            âœ… Ingress Routing
â”‚   - cookedpad.local â†’ Frontend
â”‚   - auth.cookedpad.local â†’ Auth API
â”‚   - users.cookedpad.local â†’ Users API
â”‚   - recipes.cookedpad.local â†’ Recipes API
â”‚   - comments.cookedpad.local â†’ Comments API
â”‚   - api.cookedpad.local â†’ API aggregate
â”‚
â”œâ”€â”€ deploy.ps1                 âœ… PowerShell deployment script
â”œâ”€â”€ deploy.sh                  âœ… Bash deployment script
â”œâ”€â”€ cleanup.ps1                âœ… PowerShell cleanup script
â”œâ”€â”€ cleanup.sh                 âœ… Bash cleanup script
â””â”€â”€ KUBERNETES-GUIDE.md        âœ… Complete documentation

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… STEP-BY-STEP DEPLOYMENT (CORRECT ORDER)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

OPTION A: Automated Deployment (Recommended)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PowerShell (Windows):                   â”‚
â”‚ $ cd k8s                                â”‚
â”‚ $ .\deploy.ps1                          â”‚
â”‚                                         â”‚
â”‚ Bash (Linux/Mac):                       â”‚
â”‚ $ cd k8s                                â”‚
â”‚ $ ./deploy.sh                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

OPTION B: Manual Deployment (Step by Step)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ kubectl apply -f 01-namespace.yaml      â”‚
â”‚ kubectl apply -f 02-configmap.yaml      â”‚
â”‚ kubectl apply -f 03-secrets.yaml        â”‚
â”‚                                         â”‚
â”‚ kubectl apply -f k8s/services/          â”‚
â”‚ kubectl apply -f k8s/deployments/       â”‚
â”‚                                         â”‚
â”‚ kubectl apply -f 04-hpa.yaml            â”‚
â”‚ kubectl apply -f 05-ingress.yaml        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ DEPLOYMENT COMPONENTS CHECKLIST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Step 1: Namespace
   â””â”€ cookedpad namespace for resource isolation

âœ… Step 2: ConfigMap (02-configmap.yaml)
   â”œâ”€ Service ports (3001-3004)
   â”œâ”€ API endpoints (internal URLs)
   â”œâ”€ Logging configuration
   â””â”€ Environment variables

âœ… Step 3: Secrets & RBAC (03-secrets.yaml)
   â”œâ”€ MongoDB connection string
   â”œâ”€ JWT secret key
   â”œâ”€ API keys
   â””â”€ ServiceAccount + ClusterRole + ClusterRoleBinding

âœ… Step 4: Services (k8s/services/)
   â”œâ”€ Frontend Service (LoadBalancer, port 80)
   â”œâ”€ Auth Service (ClusterIP, port 3001)
   â”œâ”€ Users Service (ClusterIP, port 3002)
   â”œâ”€ Recipes Service (ClusterIP, port 3003)
   â””â”€ Comments Service (ClusterIP, port 3004)

âœ… Step 5: Deployments (k8s/deployments/)
   â”œâ”€ Frontend Deployment (2 replicas, Nginx)
   â”œâ”€ Auth Deployment (2 replicas, Node.js)
   â”œâ”€ Users Deployment (2 replicas, Node.js)
   â”œâ”€ Recipes Deployment (2 replicas, Node.js)
   â””â”€ Comments Deployment (2 replicas, Node.js)

âœ… Step 7: HPA (04-hpa.yaml)
   â”œâ”€ Frontend HPA (min: 2, max: 10 replicas)
   â”œâ”€ Auth HPA (min: 2, max: 8 replicas)
   â”œâ”€ Users HPA (min: 2, max: 8 replicas)
   â”œâ”€ Recipes HPA (min: 2, max: 8 replicas)
   â””â”€ Comments HPA (min: 2, max: 8 replicas)

âœ… Step 8: Ingress (05-ingress.yaml)
   â”œâ”€ cookedpad.local â†’ Frontend
   â”œâ”€ auth.cookedpad.local â†’ Auth API
   â”œâ”€ users.cookedpad.local â†’ Users API
   â”œâ”€ recipes.cookedpad.local â†’ Recipes API
   â”œâ”€ comments.cookedpad.local â†’ Comments API
   â””â”€ api.cookedpad.local â†’ API gateway routes

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ” VERIFICATION COMMANDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Check All Resources:
  $ kubectl get all -n cookedpad

Check Specific Resources:
  $ kubectl get deployments -n cookedpad       # Deployments
  $ kubectl get services -n cookedpad          # Services
  $ kubectl get pods -n cookedpad              # Pods
  $ kubectl get hpa -n cookedpad               # HPA
  $ kubectl get ingress -n cookedpad           # Ingress
  $ kubectl get configmap -n cookedpad         # ConfigMaps
  $ kubectl get secret -n cookedpad            # Secrets

View Logs:
  $ kubectl logs -f deployment/cookedpad-auth -n cookedpad
  $ kubectl logs -f pod/<pod-name> -n cookedpad

Describe Resources:
  $ kubectl describe pod <pod-name> -n cookedpad
  $ kubectl describe deployment cookedpad-frontend -n cookedpad

Real-time Monitoring:
  $ kubectl get pods -n cookedpad -w          # Watch pods
  $ kubectl top nodes                          # Node metrics
  $ kubectl top pods -n cookedpad              # Pod metrics

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŒ ACCESSING THE APPLICATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Step 1: Add to hosts file (/etc/hosts or C:\Windows\System32\drivers\etc\hosts)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
127.0.0.1 cookedpad.local
127.0.0.1 auth.cookedpad.local
127.0.0.1 users.cookedpad.local
127.0.0.1 recipes.cookedpad.local
127.0.0.1 comments.cookedpad.local
127.0.0.1 api.cookedpad.local

Step 2: Access Services
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Frontend:     http://cookedpad.local
Auth API:     http://auth.cookedpad.local
Users API:    http://users.cookedpad.local
Recipes API:  http://recipes.cookedpad.local
Comments API: http://comments.cookedpad.local

Alternative (Port Forward):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$ kubectl port-forward svc/cookedpad-frontend 8080:80 -n cookedpad
Access: http://localhost:8080

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ MANAGEMENT TASKS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Manual Scaling:
  $ kubectl scale deployment cookedpad-frontend --replicas=5 -n cookedpad

Rolling Update:
  $ kubectl set image deployment/cookedpad-frontend \
    frontend=darminsusanto/cookedpad-frontend:v2 -n cookedpad
  $ kubectl rollout status deployment/cookedpad-frontend -n cookedpad

Rollback:
  $ kubectl rollout undo deployment/cookedpad-frontend -n cookedpad

Update ConfigMap:
  $ kubectl edit configmap cookedpad-config -n cookedpad
  $ kubectl rollout restart deployment -n cookedpad

Update Secrets:
  $ kubectl edit secret cookedpad-secrets -n cookedpad
  $ kubectl rollout restart deployment -n cookedpad

View HPA Status:
  $ kubectl describe hpa cookedpad-frontend-hpa -n cookedpad

Cleanup (Delete All):
  $ kubectl delete namespace cookedpad
  OR
  $ .\cleanup.ps1  (PowerShell)
  $ ./cleanup.sh   (Bash)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ KEY FEATURES IMPLEMENTED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Namespace Isolation
   â””â”€ All resources in 'cookedpad' namespace

âœ… ConfigMap Management
   â””â”€ Centralized non-sensitive configuration

âœ… Secrets Management
   â””â”€ Secure storage of sensitive data (MongoDB URI, JWT keys)

âœ… RBAC (Permissive for Dev)
   â””â”€ Auto-allow all processes (ServiceAccount + ClusterRole)

âœ… Multi-Replica Deployments
   â””â”€ 2 replicas per service for high availability

âœ… Health Checks
   â”œâ”€ Liveness Probes (restart if down)
   â”œâ”€ Readiness Probes (exclude if not ready)
   â””â”€ Both configured for all services

âœ… Horizontal Pod Autoscaling
   â”œâ”€ Frontend: scales 2-10 based on CPU/Memory
   â””â”€ Services: scales 2-8 based on CPU/Memory

âœ… Service Discovery
   â”œâ”€ LoadBalancer for Frontend (external access)
   â””â”€ ClusterIP for internal services (service-to-service)

âœ… Ingress Routing
   â”œâ”€ Domain-based routing
   â”œâ”€ Path-based routing
   â””â”€ Single entry point for all APIs

âœ… Security Context
   â”œâ”€ Non-root users
   â”œâ”€ Read-only root filesystem (where applicable)
   â””â”€ Dropped capabilities

âœ… Pod Anti-Affinity
   â””â”€ Spread pods across nodes for better availability

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š DOCUMENTATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“– KUBERNETES-GUIDE.md
   â””â”€ Complete Kubernetes guide with troubleshooting

ğŸ“– k8s/README.md
   â””â”€ Kubernetes setup instructions

ğŸ“– DEPLOYMENT.md
   â””â”€ General deployment documentation

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ IMPORTANT NOTES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. RBAC is PERMISSIVE (auto-allow all) - FOR DEVELOPMENT ONLY
   âœ For production, create restrictive RBAC policies per service

2. Deployment Order MATTERS:
   âœ Always deploy: Namespace â†’ ConfigMap â†’ Secrets â†’ Services â†’ Deployments â†’ HPA â†’ Ingress

3. Prerequisites:
   âœ kubectl configured
   âœ Kubernetes cluster running (Docker Desktop, Minikube, Kind, etc.)
   âœ Ingress controller installed (nginx-ingress recommended)
   âœ metrics-server for HPA to work

4. Hosts File Configuration Required:
   âœ Add entries to access Ingress (see section above)

5. MongoDB Connection:
   âœ Configured via Secrets - update MONGODB_URI for your environment

6. Production Checklist:
   â˜ Replace permissive RBAC with restrictive policies
   â˜ Setup TLS/SSL certificates (cert-manager)
   â˜ Add PersistentVolumes for data
   â˜ Configure resource quotas and limits
   â˜ Setup monitoring (Prometheus + Grafana)
   â˜ Add network policies
   â˜ Configure pod disruption budgets
   â˜ Implement backup strategy
   â˜ Enable audit logging

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… STATUS: COMPLETE & READY FOR KUBERNETES DEPLOYMENT
ğŸ“… Date: 2026-01-18
ğŸ¯ All 8 Steps Implemented:
   [âœ“] Step 1: Namespace
   [âœ“] Step 2: ConfigMap
   [âœ“] Step 3: Secrets + RBAC
   [âœ“] Step 4: Services
   [âœ“] Step 5: Deployments
   [âœ“] Step 6: Waiting/Ready check (built into deploy script)
   [âœ“] Step 7: HPA
   [âœ“] Step 8: Ingress

Ready to deploy! Use: .\deploy.ps1 or ./deploy.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
